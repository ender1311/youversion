const fs = require('fs');
const path = require('path');

// Get a list of all input files in the current directory
const inputFiles = fs.readdirSync('.')
  .filter(filename => filename.startsWith('input-') && filename.endsWith('.json'));

// Process each input file
inputFiles.forEach(inputFile => {
  // Extract the language code from the input file name
  const languageCode = path.basename(inputFile, '.json').split('-')[1];

  // Read the input file
  const input = fs.readFileSync(inputFile);
  const data = JSON.parse(input);

  // Generate the output-message.html file
//   const outputMessage = `{% if $\{language\} == '${languageCode}' %\}\n${data.banner_message}\n`;
//   fs.appendFileSync('output-message.html', outputMessage);

  // Generate the output-message.html file
  let outputMessage = '';
  if (languageCode === 'en') {
    outputMessage = `${data.banner_message}\n`;
  } else {
    outputMessage = `{% elsif $\{language\} == '${languageCode}' %\}\n${data.banner_message}\n`;
  }
  fs.appendFileSync('output-message.html', outputMessage);



  // Generate the output-title.html file
//   const outputTitle = `{% if $\{language\} == '${languageCode}' %\}\n${data.banner_title}\n`;
//   fs.appendFileSync('output-title.html', outputTitle);

  // Generate the output-title.html file
  let outputTitle = '';
  if (languageCode === 'en') {
    outputTitle = `${data.banner_title}\n`;
  } else {
    outputTitle = `{% elsif $\{language\} == '${languageCode}' %\}\n${data.banner_title}\n`;
  }
  fs.appendFileSync('output-title.html', outputTitle);
});
